<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 - 성격유형검사</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="admin-container">
        <!-- 사이드바 -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>🔧 관리자</h2>
                <p>청년 성격유형검사</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" onclick="showSection('dashboard')">
                        📊 대시보드
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('users')">
                        👥 사용자 관리
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('disc-questions')">
                        ❓ DiSC 문제 관리
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('mbti-questions')">
                        ❓ MBTI 문제 관리
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('stress-questions')">
                        ❓ 스트레스 문제 관리
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showSection('results')">
                        📈 검사 결과
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="logout()">
                        🚪 로그아웃
                    </a>
                </li>
            </ul>
        </nav>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 대시보드 -->
            <div id="dashboard" class="content-section active">
                <div class="content-header">
                    <h1>📊 대시보드</h1>
                    <p>전체 시스템 현황을 한눈에 확인하세요</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="total-users">1,250</h3>
                        <p>총 사용자 수</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-tests">3,420</h3>
                        <p>총 검사 완료 수</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="today-tests">45</h3>
                        <p>오늘 검사 수</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="active-users">890</h3>
                        <p>활성 사용자</p>
                    </div>
                </div>

                <div class="content-section">
                    <h3>최근 검사 결과</h3>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>사용자</th>
                                    <th>검사 유형</th>
                                    <th>결과</th>
                                    <th>검사 일시</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>김철수</td>
                                    <td><span class="badge badge-success">DiSC</span></td>
                                    <td>영향형</td>
                                    <td>2024-01-15</td>
                                </tr>
                                <tr>
                                    <td>이영희</td>
                                    <td><span class="badge badge-success">MBTI</span></td>
                                    <td>ENFP</td>
                                    <td>2024-01-15</td>
                                </tr>
                                <tr>
                                    <td>박민수</td>
                                    <td><span class="badge badge-success">스트레스</span></td>
                                    <td>보통</td>
                                    <td>2024-01-14</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 사용자 관리 -->
            <div id="users" class="content-section">
                <div class="content-header">
                    <h1>👥 사용자 관리</h1>
                    <p>사용자 정보를 관리하고 검사 이력을 확인하세요</p>
                </div>

                <div class="search-container">
                    <input type="text" class="search-input" placeholder="사용자 검색...">
                    <select class="filter-select">
                        <option value="">전체 사용자</option>
                        <option value="active">활성 사용자</option>
                        <option value="inactive">비활성 사용자</option>
                    </select>
                    <button class="btn btn-primary">🔍 검색</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>이름</th>
                                <th>이메일</th>
                                <th>가입일</th>
                                <th>검사 횟수</th>
                                <th>상태</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>김철수</td>
                                <td>kim@example.com</td>
                                <td>2024-01-01</td>
                                <td>3</td>
                                <td><span class="badge badge-success">활성</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>이영희</td>
                                <td>lee@example.com</td>
                                <td>2024-01-02</td>
                                <td>1</td>
                                <td><span class="badge badge-success">활성</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>박민수</td>
                                <td>park@example.com</td>
                                <td>2024-01-03</td>
                                <td>2</td>
                                <td><span class="badge badge-warning">비활성</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- DiSC 문제 관리 -->
            <div id="disc-questions" class="content-section">
                <div class="content-header">
                    <h1>❓ DiSC 문제 관리</h1>
                    <p>DiSC 성격유형검사 문제를 추가, 수정, 삭제하세요</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" data-test-type="disc">➕ 문제 추가</button>
                    <button class="btn btn-warning" onclick="loadQuestions('disc')">🔄 새로고침</button>
                    <button class="btn btn-success" onclick="testModal()">🧪 테스트</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>문제</th>
                                <th>옵션 수</th>
                                <th>생성일</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>새로운 프로젝트를 시작할 때 나는...</td>
                                <td>4개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>갈등 상황에서 나는...</td>
                                <td>4개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- MBTI 문제 관리 -->
            <div id="mbti-questions" class="content-section">
                <div class="content-header">
                    <h1>❓ MBTI 문제 관리</h1>
                    <p>MBTI 성격유형검사 문제를 추가, 수정, 삭제하세요</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" data-test-type="mbti">➕ 문제 추가</button>
                    <button class="btn btn-warning" onclick="loadQuestions('mbti')">🔄 새로고침</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>문제</th>
                                <th>옵션 수</th>
                                <th>생성일</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>에너지를 얻는 방식은?</td>
                                <td>2개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>정보를 받아들이는 방식은?</td>
                                <td>2개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 스트레스 문제 관리 -->
            <div id="stress-questions" class="content-section">
                <div class="content-header">
                    <h1>❓ 스트레스 문제 관리</h1>
                    <p>스트레스 관리 척도 문제를 추가, 수정, 삭제하세요</p>
                </div>

                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary" data-test-type="stress">➕ 문제 추가</button>
                    <button class="btn btn-warning" onclick="loadQuestions('stress')">🔄 새로고침</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>번호</th>
                                <th>문제</th>
                                <th>옵션 수</th>
                                <th>생성일</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>최근 스트레스를 받는 상황이 얼마나 자주 있었나요?</td>
                                <td>5개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>스트레스 상황에서 나의 반응은?</td>
                                <td>4개</td>
                                <td>2024-01-01</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-warning btn-sm">수정</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 검사 결과 -->
            <div id="results" class="content-section">
                <div class="content-header">
                    <h1>📈 검사 결과</h1>
                    <p>전체 검사 결과를 분석하고 통계를 확인하세요</p>
                </div>

                <div class="search-container">
                    <select class="filter-select">
                        <option value="">전체 검사</option>
                        <option value="disc">DiSC</option>
                        <option value="mbti">MBTI</option>
                        <option value="stress">스트레스</option>
                    </select>
                    <input type="date" class="filter-select">
                    <input type="date" class="filter-select">
                    <button class="btn btn-primary">🔍 필터</button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>사용자</th>
                                <th>검사 유형</th>
                                <th>결과</th>
                                <th>점수</th>
                                <th>검사 일시</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>김철수</td>
                                <td><span class="badge badge-success">DiSC</span></td>
                                <td>영향형</td>
                                <td>85점</td>
                                <td>2024-01-15</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>이영희</td>
                                <td><span class="badge badge-success">MBTI</span></td>
                                <td>ENFP</td>
                                <td>78점</td>
                                <td>2024-01-15</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                            <tr>
                                <td>박민수</td>
                                <td><span class="badge badge-success">스트레스</span></td>
                                <td>보통</td>
                                <td>65점</td>
                                <td>2024-01-14</td>
                                <td>
                                    <button class="btn btn-primary btn-sm">보기</button>
                                    <button class="btn btn-danger btn-sm">삭제</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- 문제 추가 모달 -->
    <div id="add-question-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>문제 추가</h3>
                <span class="close" onclick="closeAddQuestionModal()">&times;</span>
            </div>
            <form id="add-question-form">
                <div class="form-group">
                    <label for="question-text">문제 내용</label>
                    <textarea id="question-text" placeholder="문제 내용을 입력하세요" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>선택지</label>
                    <div id="options-container">
                        <div class="option-item">
                            <input type="text" placeholder="선택지 1" class="option-text" required>
                            <input type="number" placeholder="D" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="I" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="S" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="C" class="disc-score" min="0" max="10">
                            <button type="button" class="remove-option-btn" onclick="removeOption(this)">삭제</button>
                        </div>
                        <div class="option-item">
                            <input type="text" placeholder="선택지 2" class="option-text" required>
                            <input type="number" placeholder="D" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="I" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="S" class="disc-score" min="0" max="10">
                            <input type="number" placeholder="C" class="disc-score" min="0" max="10">
                            <button type="button" class="remove-option-btn" onclick="removeOption(this)">삭제</button>
                        </div>
                    </div>
                    <button type="button" class="add-option-btn" onclick="addOption()">
                        <i class="fas fa-plus"></i> 선택지 추가
                    </button>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">문제 저장</button>
                    <button type="button" class="btn" onclick="closeAddQuestionModal()">취소</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>